# ══════════════════════════════════════════════════════════════
# AI Virtual Try-On – Environment Variables (Phase 2)
# Copy to .env and fill in your values
# ══════════════════════════════════════════════════════════════

# ── Model Configuration ────────────────────────────────────────
INPAINTING_MODEL_ID=diffusers/stable-diffusion-xl-1.0-inpainting-0.1

# ── Runtime ────────────────────────────────────────────────────
DEVICE=cuda                        # cuda | cpu
USE_FP16=true
USE_XFORMERS=true
NUM_INFERENCE_STEPS=30
GUIDANCE_SCALE=7.5
OUTPUT_SIZE=1024
STRENGTH=0.85

# ── Phase 2: Identity Preservation ────────────────────────────
USE_REFINER=true                   # Enable SDXL Refiner for detail sharpening
REFINER_STRENGTH=0.2               # 0.15-0.3 recommended (higher = more change)
REFINER_STEPS=20
FACE_MASK_PADDING=30               # px padding around face bbox to exclude from mask
IP_ADAPTER_SCALE=0.7               # 0.5-0.8 (higher = stronger face identity lock)
FACE_IDENTITY_ENABLED=true         # Disable if InsightFace not installed

# ── S3-Compatible Storage ──────────────────────────────────────
# Leave blank for base64 fallback (fine for local testing)
S3_BUCKET=tryon-results
S3_ENDPOINT_URL=                   # blank = AWS S3; set for MinIO/Cloudflare R2
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=us-east-1
RESULT_URL_EXPIRY_SECONDS=3600

# ── API ────────────────────────────────────────────────────────
MAX_UPLOAD_SIZE_MB=20
ALLOWED_ORIGINS=["*"]

# ── Production Queue (disabled in Phase 2) ─────────────────────
# Uncomment and configure when you need concurrent job handling:
# REDIS_URL=redis://redis:6379/0
# CELERY_MAX_CONCURRENCY=1
